<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/blog/images/logo.svg?v=7.4.1" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="google-site-verification" content="_Sly-yzHYmALHXzjFpPWsodMrjBSphw7bfRbMUH80Qc">
  <meta name="msvalidate.01" content="B1CFD346B8DEBBFE0C983C2AF8955531">
  <meta name="baidu-site-verification" content="vkMTwK56xr">

<link rel="stylesheet" href="/blog/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Gemini',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"right","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="流编辑sed和正则表达式替换sed 会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下： 每次仅读取一行内容； 根据提供的规则命令匹配并修改数据。注意，sed 默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据； 将执行结果输出。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux流编辑命令sed">
<meta property="og:url" content="https://tongsiying.github.io/blog/ce005e75/index.html">
<meta property="og:site_name" content="蓝蓝博客">
<meta property="og:description" content="流编辑sed和正则表达式替换sed 会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下： 每次仅读取一行内容； 根据提供的规则命令匹配并修改数据。注意，sed 默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据； 将执行结果输出。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-03T07:32:51.000Z">
<meta property="article:modified_time" content="2021-05-03T07:32:51.000Z">
<meta property="article:author" content="蓝蓝">
<meta property="article:tag" content="程序员">
<meta property="article:tag" content="java">
<meta property="article:tag" content="读书">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="SQL">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="批处理">
<meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://tongsiying.github.io/blog/ce005e75/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Linux流编辑命令sed | 蓝蓝博客</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">蓝蓝博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/blog/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-dir">
      
    

    <a href="/blog/dir/" rel="section"><i class="fa fa-fw fa-sitemap"></i>目录</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/blog/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/blog/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-links">
      
    

    <a href="/blog/links/" rel="section"><i class="fa fa-fw fa-link"></i>链接</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">
        
          <i class="fa fa-search fa-fw"></i>搜索</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/lanlan2017" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tongsiying.github.io/blog/blog/ce005e75/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="先看视频再看书">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">Linux流编辑命令sed

          
        </h2>

        <div class="post-meta">
          <!-- 置顶插件添加 开始 -->
          
          <!-- 置顶插件添加 结束 -->
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2021-05-03 15:32:51" itemprop="dateCreated datePublished" datetime="2021-05-03T15:32:51+08:00">2021-05-03</time>
            </span>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/%E7%BC%96%E7%A8%8B/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/%E7%BC%96%E7%A8%8B/Linux/%E9%80%9A%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">通用</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/%E7%BC%96%E7%A8%8B/Linux/%E9%80%9A%E7%94%A8/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">正则表达式</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/blog/ce005e75/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/blog/ce005e75/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="流编辑sed和正则表达式替换"><a href="#流编辑sed和正则表达式替换" class="headerlink" title="流编辑sed和正则表达式替换"></a>流编辑sed和正则表达式替换</h1><p>sed 会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下：</p><ul>
<li>每次仅读取一行内容；</li>
<li>根据提供的规则命令匹配并修改数据。注意，sed 默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据；</li>
<li>将执行结果输出。</li>
</ul><a id="more"></a>

<p>当一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。</p>
<p>sed全名叫stream editor，流编辑器，用程序的方式来编辑文本，相当的hacker啊。sed基本上就是玩正则模式匹配，所以，玩sed的人，正则表达式一般都比较强。</p>
<p>sed 默认读取整个文件并对其中的每一行进行修改。说白了就是一行一行的操作。</p>
<p>sed 是一种在线编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。</p>
<h1 id="sed命令常用选项及含义"><a href="#sed命令常用选项及含义" class="headerlink" title="sed命令常用选项及含义"></a>sed命令常用选项及含义</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-e 脚本命令</td>
<td style="text-align:left">该选项会将其后跟的脚本命令添加到已有的命令中。</td>
</tr>
<tr>
<td style="text-align:left">-f 脚本命令文件</td>
<td style="text-align:left">，该选项会将其后文件中的脚本命令添加到已有的命令中。</td>
</tr>
<tr>
<td style="text-align:left">-n</td>
<td style="text-align:left">使用安静silent模式。在一般sed的用法中，所有来自stdin的内容一般都会被列出到屏幕上。但如果加上-n参数后，则只有经过sed特殊处理的那一行(或者动作)才会被列出来</td>
</tr>
<tr>
<td style="text-align:left">-i</td>
<td style="text-align:left">直接修改读取的文件内容，而不是由屏幕输出</td>
</tr>
<tr>
<td style="text-align:left">-r</td>
<td style="text-align:left">让sed命令支持扩展的正则表达式(默认是基础正则表达式)</td>
</tr>
</tbody>
</table>
</div>
<h2 id="sed命令常见用法"><a href="#sed命令常见用法" class="headerlink" title="sed命令常见用法"></a>sed命令常见用法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;命令&#39; 文件名列表</span><br><span class="line">sed –e &#39;命令1&#39; –e &#39;命令2&#39; –e &#39;命令3&#39; 文件名列表</span><br><span class="line">sed -f 命令文件 文件名列表</span><br></pre></td></tr></table></figure>
<p>成功使用 sed 命令的关键在于掌握各式各样的脚本命令及格式，它能帮你定制编辑文件的规则。</p>
<h2 id="sed-i：直接修改文件内容"><a href="#sed-i：直接修改文件内容" class="headerlink" title="sed -i：直接修改文件内容"></a>sed -i：直接修改文件内容</h2><p>sed 的<code>-i</code>选项可以直接修改文件内容，这功能非常有帮助！举例来说，如果你有一个 100 万行的文件，你要在第 100 行加某些文字，此时使用 vim 可能会疯掉！因为文件太大了！那怎办？就利用 sed 啊！透过 sed 直接修改/取代的功能，你甚至不需要使用 vim 去修订！</p>
<h3 id="删除空行"><a href="#删除空行" class="headerlink" title="删除空行"></a>删除空行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# sed &#39;&#x2F;^$&#x2F;d&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="删除空行并且替换原文件"><a href="#删除空行并且替换原文件" class="headerlink" title="删除空行并且替换原文件"></a>删除空行并且替换原文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# sed -i &#39;&#x2F;^$&#x2F;d&#39; sed_append.txt </span><br><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<p>删除＃号开头的行到最后一行之间的所有行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# sed &#39;&#x2F;^#&#x2F;,$d&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed -i &#39;&#x2F;^#&#x2F;,$d&#39; sed_append.txt </span><br><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h1 id="sed脚本命令"><a href="#sed脚本命令" class="headerlink" title="sed脚本命令"></a>sed脚本命令</h1><h2 id="sed脚本命令s：替换行中的部分内容"><a href="#sed脚本命令s：替换行中的部分内容" class="headerlink" title="sed脚本命令s：替换行中的部分内容"></a>sed脚本命令s：替换行中的部分内容</h2><p>此命令的基本格式为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]s&#x2F;pattern&#x2F;replacement&#x2F;flags</span><br></pre></td></tr></table></figure><br>其中，<br>address表示指定要操作的具体行，<br>pattern 指的是需要替换的内容，<br>replacement 指的是要替换的新内容。</p>
<p>此命令中常用的 flags 标记如下表所示</p>
<h3 id="sed的s命令的flags标记及功能"><a href="#sed的s命令的flags标记及功能" class="headerlink" title="sed的s命令的flags标记及功能"></a>sed的s命令的flags标记及功能</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">flags标记</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">1~512 之间的数字，表示指定要替换的字符串出现第几次时才进行替换，例如，一行中有 3 个 A，但用户只想替换第二个 A，这是就用到这个标记；</td>
</tr>
<tr>
<td style="text-align:left"><code>g</code></td>
<td style="text-align:left">对数据中所有匹配到的内容进行替换，如果没有 g，则只会在第一次匹配成功时做替换操作。例如，一行数据中有 3 个 A，则只会替换第一个 A；</td>
</tr>
<tr>
<td style="text-align:left"><code>p</code></td>
<td style="text-align:left">会打印与替换命令中指定的模式匹配的行。此标记通常与 -n 选项一起使用。</td>
</tr>
<tr>
<td style="text-align:left"><code>w file</code></td>
<td style="text-align:left">将缓冲区中的内容写到指定的 file 文件中；</td>
</tr>
<tr>
<td style="text-align:left"><code>&amp;</code></td>
<td style="text-align:left">用正则表达式匹配的内容进行替换；</td>
</tr>
<tr>
<td style="text-align:left"><code>\n</code></td>
<td style="text-align:left">匹配第 n 个子串，该子串之前在 pattern 中用 () 指定。</td>
</tr>
<tr>
<td style="text-align:left"><code>\</code></td>
<td style="text-align:left">转义（转义替换部分包含：&amp;、\ 等）。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="在行首添加内容"><a href="#在行首添加内容" class="headerlink" title="在行首添加内容"></a>在行首添加内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# sed &#39;s&#x2F;^&#x2F;#&#x2F;g&#39; sed_append.txt </span><br><span class="line">#this is line a</span><br><span class="line">#this is line b</span><br><span class="line">#this is line c</span><br><span class="line">#this is line d</span><br><span class="line">## helloworld_1</span><br><span class="line">## helloworld_2</span><br><span class="line">## helloworld_3</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="在行尾添加内容"><a href="#在行尾添加内容" class="headerlink" title="在行尾添加内容"></a>在行尾添加内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# sed &#39;s&#x2F;$&#x2F;。&#x2F;g&#39; sed_append.txt </span><br><span class="line">this is line a。</span><br><span class="line">this is line b。</span><br><span class="line">this is line c。</span><br><span class="line">this is line d。</span><br><span class="line"># helloworld_1。</span><br><span class="line"># helloworld_2。</span><br><span class="line"># helloworld_3。</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="替换所有行中第n次模式匹配的地方：sed-‘s-pattern-replacement-n’"><a href="#替换所有行中第n次模式匹配的地方：sed-‘s-pattern-replacement-n’" class="headerlink" title="替换所有行中第n次模式匹配的地方：sed ‘s/pattern/replacement/n’"></a>替换所有行中第n次模式匹配的地方：sed ‘s/pattern/replacement/n’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;s&#x2F;pattern&#x2F;replacement&#x2F;n&#39;</span><br></pre></td></tr></table></figure>
<p>例如,将所有行中出现的第二个制表符<code>\t</code>替换为减号<code>-</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">		System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">		System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">		System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">		for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">			System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;s&#x2F;\t&#x2F;----&#x2F;2&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">	----System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">	----System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">	----System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">	----for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">	----	System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">	----&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure><br>将所有行中出现的第3个sed字符串替换为全大写的SED字符串：</p>
<pre>
[root@localhost sed]&#35; cat SedTest.java 
public class SedTest{
    public static void main(String[] args){
        System.out.println("HelloWorld!");
        System.out.println("sed命令示例");
        System.out.println("sed替换示例");
        for(int i=0;i&lt;5;i++){
            System.out.println("sed_sed_sed_sed"+i);
        }
    }
}
[root@localhost sed]&#35; sed 's/sed/SED/3' SedTest.java 
public class SedTest{
    public static void main(String[] args){
        System.out.println("HelloWorld!");
        System.out.println("sed命令示例");
        System.out.println("sed替换示例");
        for(int i=0;i&lt;5;i++){
            System.out.println("sed_sed_<mark>SED</mark>_sed"+i);
        }
    }
}
[root@localhost sed]&#35; 
</pre>

<h3 id="替换某行中全部模式匹配的地方：sed-‘行号s-pattern-replacement-g’"><a href="#替换某行中全部模式匹配的地方：sed-‘行号s-pattern-replacement-g’" class="headerlink" title="替换某行中全部模式匹配的地方：sed ‘行号s/pattern/replacement/g’"></a>替换某行中全部模式匹配的地方：sed ‘行号s/pattern/replacement/g’</h3><p>把第3行中的所有<code>\t</code>全部替换为4个减号：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n SedTest.java </span><br><span class="line">     1    public class SedTest&#123;</span><br><span class="line">     2        public static void main(String[] args)&#123;</span><br><span class="line">     3            System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">     4            System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">     5            System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">     6            for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">     7                System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">     8            &#125;</span><br><span class="line">     9        &#125;</span><br><span class="line">    10    &#125;</span><br><span class="line">[root@localhost sed]# sed &#39;3s&#x2F;\t&#x2F;----&#x2F;g&#39; SedTest.java|cat -n</span><br><span class="line">     1    public class SedTest&#123;</span><br><span class="line">     2        public static void main(String[] args)&#123;</span><br><span class="line">     3    --------System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">     4            System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">     5            System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">     6            for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">     7                System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">     8            &#125;</span><br><span class="line">     9        &#125;</span><br><span class="line">    10    &#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h3 id="替换第N行到第M行中第x次模式匹配的地方：sed-‘N-Ms-pattern-replacement-x’"><a href="#替换第N行到第M行中第x次模式匹配的地方：sed-‘N-Ms-pattern-replacement-x’" class="headerlink" title="替换第N行到第M行中第x次模式匹配的地方：sed ‘N,Ms/pattern/replacement/x’"></a>替换第N行到第M行中第x次模式匹配的地方：sed ‘N,Ms/pattern/replacement/x’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;N,Ms&#x2F;pattern&#x2F;replacement&#x2F;x&#39;</span><br></pre></td></tr></table></figure>
<p>这里的行号范围包括N,但不包括M,也就是替换[N,M)区间内的行数。</p>
<h4 id="第2到第3行之间的第2个制表符替换成四个减号"><a href="#第2到第3行之间的第2个制表符替换成四个减号" class="headerlink" title="第2到第3行之间的第2个制表符替换成四个减号"></a>第2到第3行之间的第2个制表符替换成四个减号</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# sed &#39;2,3s&#x2F;\t&#x2F;----&#x2F;2&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">    ----System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h4 id="第2到第4行之间的第2个制表符替换成四个减号"><a href="#第2到第4行之间的第2个制表符替换成四个减号" class="headerlink" title="第2到第4行之间的第2个制表符替换成四个减号"></a>第2到第4行之间的第2个制表符替换成四个减号</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# sed &#39;2,4s&#x2F;\t&#x2F;----&#x2F;2&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">    ----System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">    ----System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="替换行中所有模式匹配的地方：sed-‘s-pattern-replacement-g’"><a href="#替换行中所有模式匹配的地方：sed-‘s-pattern-replacement-g’" class="headerlink" title="替换行中所有模式匹配的地方：sed ‘s/pattern/replacement/g’"></a>替换行中所有模式匹配的地方：sed ‘s/pattern/replacement/g’</h3><h4 id="将所有行中的所有制表符全部替换为四个减号"><a href="#将所有行中的所有制表符全部替换为四个减号" class="headerlink" title="将所有行中的所有制表符全部替换为四个减号"></a>将所有行中的所有制表符全部替换为四个减号</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;s&#x2F;\t&#x2F;----&#x2F;g&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">----public static void main(String[] args)&#123;</span><br><span class="line">--------System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">--------System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">--------System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">--------for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">------------System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">--------&#125;</span><br><span class="line">----&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h4 id="将所有的全小写的sed字符全部替换为全大写的SED字符串"><a href="#将所有的全小写的sed字符全部替换为全大写的SED字符串" class="headerlink" title="将所有的全小写的sed字符全部替换为全大写的SED字符串"></a>将所有的全小写的sed字符全部替换为全大写的SED字符串</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;s&#x2F;sed&#x2F;SED&#x2F;g&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;SED命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;SED替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;SED_SED_SED_SED&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h4 id="将包括第1行到不包括第3行之间的制表符改成4个减号"><a href="#将包括第1行到不包括第3行之间的制表符改成4个减号" class="headerlink" title="将包括第1行到不包括第3行之间的制表符改成4个减号"></a>将包括第1行到不包括第3行之间的制表符改成4个减号</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;1,3s&#x2F;\t&#x2F;----&#x2F;g&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">----public static void main(String[] args)&#123;</span><br><span class="line">--------System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="将缓冲区中的内容输出到文件中：sed-‘s-pattern-replacement-flag-w-file’："><a href="#将缓冲区中的内容输出到文件中：sed-‘s-pattern-replacement-flag-w-file’：" class="headerlink" title="将缓冲区中的内容输出到文件中：sed ‘s/pattern/replacement/flag w file’："></a>将缓冲区中的内容输出到文件中：sed ‘s/pattern/replacement/flag w file’：</h3><p>经过替换的行会保存在缓冲区中，没经过替换的行则不会放入缓冲区中。如果想把这些经过替换之后的行输出到文件中，可以在s脚本的后面追加flags标记<code>w 文件名</code>。</p>
<p>例如，将[2,4)区间范围的行的所有\t替换成四个减号，并且输出缓冲区的内容到文件中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;2,4s&#x2F;\t&#x2F;----&#x2F;g w out.txt&#39; SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">----public static void main(String[] args)&#123;</span><br><span class="line">--------System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">--------System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# ls</span><br><span class="line">out.txt  SedTest.java</span><br><span class="line">[root@localhost sed]# cat out.txt </span><br><span class="line">----public static void main(String[] args)&#123;</span><br><span class="line">--------System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">--------System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h2 id="sed脚本命令d：删除某行"><a href="#sed脚本命令d：删除某行" class="headerlink" title="sed脚本命令d：删除某行"></a>sed脚本命令d：删除某行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;[address]d&#39;</span><br></pre></td></tr></table></figure>
<p>如果需要删除文本中的特定行，可以用 d 脚本命令，它会删除指定行中的所有内容。但使用该命令时要特别小心，如果你忘记指定具体行的话，文件中的所有内容都会被删除，举个例子：</p>
<h3 id="sed删除所有的行"><a href="#sed删除所有的行" class="headerlink" title="sed删除所有的行"></a>sed删除所有的行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat SedTest.java </span><br><span class="line">public class SedTest&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;d&#39; SedTest.java &gt; sed_d_out.txt</span><br><span class="line">[root@localhost sed]# cat sed_d_out.txt </span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="sed删除指定行"><a href="#sed删除指定行" class="headerlink" title="sed删除指定行"></a>sed删除指定行</h3><h4 id="只删除某行"><a href="#只删除某行" class="headerlink" title="只删除某行"></a>只删除某行</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;行号d&#39;</span><br></pre></td></tr></table></figure>
<p>例如，只删除第2行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n SedTest.java </span><br><span class="line">     1    public class SedTest&#123;</span><br><span class="line">     2        public static void main(String[] args)&#123;</span><br><span class="line">     3            System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">     4            System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">     5            System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">     6            for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">     7                System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">     8            &#125;</span><br><span class="line">     9        &#125;</span><br><span class="line">    10    &#125;</span><br><span class="line">[root@localhost sed]# sed &#39;2d&#39; SedTest.java</span><br><span class="line">public class SedTest&#123;</span><br><span class="line">        System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">        System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">        System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">            System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h4 id="删除第N行到第M行"><a href="#删除第N行到第M行" class="headerlink" title="删除第N行到第M行"></a>删除第N行到第M行</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;[N,M]d&#39;</span><br></pre></td></tr></table></figure>
<p>与替换不同的时，删除使用的是全闭区间。<br>命令<code>sed &#39;1,2d&#39; SedTest.java</code>表示删除区间<code>[1,2]</code>的所有行,也就是删除第1行，并且删除第2行。<br>而命令<code>sed &#39;1,2s/\t/----/g&#39; SetTest.java</code>,表示把区间<code>[1,2)</code>之间的所有行中的\t全部替换成四个减号，也就是只替换第1行，不替换第2行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n SedTest.java </span><br><span class="line">     1	public class SedTest&#123;</span><br><span class="line">     2		public static void main(String[] args)&#123;</span><br><span class="line">     3			System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">     4			System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">     5			System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">     6			for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">     7				System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">     8			&#125;</span><br><span class="line">     9		&#125;</span><br><span class="line">    10	&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;1,2d&#39; SedTest.java</span><br><span class="line">		System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">		System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">		System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">		for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">			System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]# sed &#39;1,2s&#x2F;\t&#x2F;----&#x2F;g&#39; SedTest.java</span><br><span class="line">public class SedTest&#123;</span><br><span class="line">----public static void main(String[] args)&#123;</span><br><span class="line">		System.out.println(&quot;HelloWorld!&quot;);</span><br><span class="line">		System.out.println(&quot;sed命令示例&quot;);</span><br><span class="line">		System.out.println(&quot;sed替换示例&quot;);</span><br><span class="line">		for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">			System.out.println(&quot;sed_sed_sed_sed&quot;+i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="删除空行-1"><a href="#删除空行-1" class="headerlink" title="删除空行"></a>删除空行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;&#x2F;^$&#x2F;d&#39; a.txt       #删除所有空行</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;&#x2F;^$&#x2F;d&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<p>删除<code>#</code>开头的行，到最后一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line"># helloworld_1</span><br><span class="line"># helloworld_2</span><br><span class="line"># helloworld_3</span><br><span class="line">[root@localhost sed]# sed &#39;&#x2F;^#&#x2F;,$d&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h2 id="sed脚本命令a：在指定行后追加新行"><a href="#sed脚本命令a：在指定行后追加新行" class="headerlink" title="sed脚本命令a：在指定行后追加新行"></a>sed脚本命令a：在指定行后追加新行</h2><p>在第N行之后附加新的内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;行号a 附加的内容&#39;</span><br></pre></td></tr></table></figure></p>
<h3 id="在某行之后追加一行"><a href="#在某行之后追加一行" class="headerlink" title="在某行之后追加一行"></a>在某行之后追加一行</h3><p>例如，在第2行只有追加一行字符串<code>this is the newly inserted line</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n sed_append.txt </span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2a this is the newly inserted line&#39; sed_append.txt |cat -n</span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is the newly inserted line</span><br><span class="line">     4    this is line c</span><br><span class="line">     5    this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h3 id="在某行之后追加多行"><a href="#在某行之后追加多行" class="headerlink" title="在某行之后追加多行"></a>在某行之后追加多行</h3><h4 id="使用折行符号"><a href="#使用折行符号" class="headerlink" title="使用折行符号"></a>使用折行符号</h4><p>使用在<strong>单引号</strong>中使用折行符<code>\</code>可以追加多行到指定行的后面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n sed_append.txt </span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2a this is the newly inserted line 1\</span><br><span class="line">this is the newly inserted line 2&#39; sed_append.txt |cat -n</span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is the newly inserted line 1</span><br><span class="line">     4    this is the newly inserted line 2</span><br><span class="line">     5    this is line c</span><br><span class="line">     6    this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h4 id="使用换行符-n"><a href="#使用换行符-n" class="headerlink" title="使用换行符\n"></a>使用换行符\n</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n sed_append.txt </span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">     5    helloworld1</span><br><span class="line">     6    helloworld2</span><br><span class="line">[root@localhost sed]# sed &#39;1i this is the newly inserted line 1\nthis is the newly inserted line 2&#39; sed_append.txt |cat -n</span><br><span class="line">     1    this is the newly inserted line 1</span><br><span class="line">     2    this is the newly inserted line 2</span><br><span class="line">     3    this is line a</span><br><span class="line">     4    this is line b</span><br><span class="line">     5    this is line c</span><br><span class="line">     6    this is line d</span><br><span class="line">     7    helloworld1</span><br><span class="line">     8    helloworld2</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h2 id="sed脚本命令i：在指定行之前插入新行"><a href="#sed脚本命令i：在指定行之前插入新行" class="headerlink" title="sed脚本命令i：在指定行之前插入新行"></a>sed脚本命令i：在指定行之前插入新行</h2><h3 id="在第N行之前插入一行"><a href="#在第N行之前插入一行" class="headerlink" title="在第N行之前插入一行"></a>在第N行之前插入一行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n sed_append.txt </span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2i this is the newly inserted line&#39; sed_append.txt |cat -n</span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is the newly inserted line</span><br><span class="line">     3    this is line b</span><br><span class="line">     4    this is line c</span><br><span class="line">     5    this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="在第N行之前插入多行"><a href="#在第N行之前插入多行" class="headerlink" title="在第N行之前插入多行"></a>在第N行之前插入多行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n sed_append.txt </span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2i this is the newly inserted line 1\</span><br><span class="line">this is the newly inserted line 2&#39; sed_append.txt |cat -n</span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is the newly inserted line 1</span><br><span class="line">     3    this is the newly inserted line 2</span><br><span class="line">     4    this is line b</span><br><span class="line">     5    this is line c</span><br><span class="line">     6    this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h2 id="sed脚本命令c：替换整行"><a href="#sed脚本命令c：替换整行" class="headerlink" title="sed脚本命令c：替换整行"></a>sed脚本命令c：替换整行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]c\用于替换的新文本</span><br></pre></td></tr></table></figure>
<h3 id="替换第2行的内容"><a href="#替换第2行的内容" class="headerlink" title="替换第2行的内容"></a>替换第2行的内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat -n sed_append.txt </span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is line b</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2c this is the line after replacement&#39; sed_append.txt |cat -n</span><br><span class="line">     1    this is line a</span><br><span class="line">     2    this is the line after replacement</span><br><span class="line">     3    this is line c</span><br><span class="line">     4    this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h2 id="sed脚本命令y：字符集映射替换"><a href="#sed脚本命令y：字符集映射替换" class="headerlink" title="sed脚本命令y：字符集映射替换"></a>sed脚本命令y：字符集映射替换</h2><p>y 转换命令是唯一可以处理单个字符的 sed 脚本命令，其基本格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;[address]y&#x2F;inchars&#x2F;outchars&#x2F;&#39;</span><br></pre></td></tr></table></figure><br>转换命令会对 inchars 和 outchars 值进行一对一的映射，即 inchars 中的第一个字符会被转换为 outchars 中的第一个字符，第二个字符会被转换成 outchars 中的第二个字符…这个映射过程会一直持续到处理完指定字符。如果 inchars 和 outchars 的长度不同，则 sed 会产生一条错误消息。</p>
<h3 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h3><p>例如按如下映射进行替换：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">匹配字符</th>
<th style="text-align:left">替换字符</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">b</td>
<td style="text-align:left">2</td>
</tr>
<tr>
<td style="text-align:left">c</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">d</td>
<td style="text-align:left">4</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;y&#x2F;abcd&#x2F;1234&#x2F;&#39; sed_append.txt</span><br><span class="line">this is line 1</span><br><span class="line">this is line 2</span><br><span class="line">this is line 3</span><br><span class="line">this is line 4</span><br><span class="line">[root@localhost sed]# sed &#39;1,2y&#x2F;abcd&#x2F;1234&#x2F;&#39; sed_append.txt</span><br><span class="line">this is line 1</span><br><span class="line">this is line 2</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<p>可以看到，inchars 模式中指定字符的每个实例都会被替换成 outchars 模式中相同位置的那个字符。</p>
<h3 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">匹配字符</th>
<th style="text-align:left">替换字符</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">b</td>
<td style="text-align:left">2</td>
</tr>
<tr>
<td style="text-align:left">c</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">d</td>
<td style="text-align:left">4</td>
</tr>
<tr>
<td style="text-align:left">e</td>
<td style="text-align:left">5</td>
</tr>
</tbody>
</table>
</div>
<pre>
[root@localhost sed]&#35; cat sed_append.txt 
this is line a
this is line b
this is line c
this is line d
[root@localhost sed]&#35; sed '1,2y/abcde/12345/' sed_append.txt
this is lin<mark>5</mark> <mark>1</mark>
this is lin<mark>5</mark> <mark>2</mark>
this is line c
this is line d
[root@localhost sed]&#35;
</pre>

<h3 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;1,2y&#x2F;abcdefghijklmnopqrstuvwxyz&#x2F;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x2F;&#39; sed_append.txt</span><br><span class="line">THIS IS LINE A</span><br><span class="line">THIS IS LINE B</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h2 id="sed脚本命令p：打印某行"><a href="#sed脚本命令p：打印某行" class="headerlink" title="sed脚本命令p：打印某行"></a>sed脚本命令p：打印某行</h2><blockquote>
<p>sed 默认会打印出被处理的输入内容，这些内容跟原始输入内容不一定完全一样，sed 的一些命令可以修改或删除输入内容，再把新的内容打印出来。<br>打印的输出结果并不是只对应匹配特定模式的行。<br>那些没有被处理的行，会原样打印。<br>如果只想打印匹配特定模式的行，要用 -n 选项和 p 命令。</p>
</blockquote>
<p>注意：-n 选项并不表示打印匹配特定模式且被处理的行。<br>例如，使用 -n 选项和 d 命令不会看到任何打印，并不会打印出被删除的行。</p>
<p><code>sed -n</code>∶使用安静(silent)模式。在一般 sed 的用法中，所有来自STDIN的资料一般都会被列出到萤幕上。但<strong>如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来</strong>。</p>
<h3 id="sed-‘-address-p’-输出匹配的行"><a href="#sed-‘-address-p’-输出匹配的行" class="headerlink" title="sed ‘[address]p’ 输出匹配的行"></a>sed ‘[address]p’ 输出匹配的行</h3><p>p命令表示搜索符号条件的行，并输出该行的内容。</p>
<pre>
[root@localhost sed]&#35; cat sed_append.txt 
this is line a
this is line b
this is line c
this is line d
&#35; helloworld_1
&#35; helloworld_2
&#35; helloworld_3
[root@localhost sed]&#35; sed '/^&#35;/p' sed_append.txt 
this is line a
this is line b
this is line c
this is line d
&#35; helloworld_1
<mark>&#35; helloworld_1</mark>
&#35; helloworld_2
<mark>&#35; helloworld_2</mark>
&#35; helloworld_3
<mark>&#35; helloworld_3</mark>
[root@localhost sed]&#35;
</pre>

<p>可以看到匹配的行输出了两次，第一次的输出是sed的输出，第2个输出则是脚本命令p的输出。<br>如果想只输出匹配的行，其他的行不输出的话，则可以加上-n参数。：</p>
<pre>
[root@localhost sed]&#35; cat sed_append.txt 
this is line a
this is line b
this is line c
this is line d
&#35; helloworld_1
&#35; helloworld_2
&#35; helloworld_3
[root@localhost sed]&#35; sed -n '/^&#35;/p' sed_append.txt 
&#35; helloworld_1
&#35; helloworld_2
&#35; helloworld_3
[root@localhost sed]&#35; 
</pre>


<p>通常 p 会与参数 sed -n 一起运作。此命令的基本格式为：</p>
<h3 id="sed-n-‘-address-p’"><a href="#sed-n-‘-address-p’" class="headerlink" title="sed -n ‘[address]p’"></a>sed -n ‘[address]p’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#39;[address]p&#39;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#39;1p&#39; filename           #显示第一行 </span><br><span class="line">sed -n &#39;$p&#39; filename           #显示最后一行</span><br><span class="line">sed -n &#39;1,2p&#39; filename        #显示第一行到第二行</span><br><span class="line">sed -n &#39;2,$p&#39; filename        #显示第二行到最后一行</span><br></pre></td></tr></table></figure>
<p>p 命令常见的用法是打印包含匹配文本模式的行，例如：</p>
<h3 id="打印第一行"><a href="#打印第一行" class="headerlink" title="打印第一行"></a>打印第一行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed -n &#39;1p&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="打印最后一行"><a href="#打印最后一行" class="headerlink" title="打印最后一行"></a>打印最后一行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]# sed -n &#39;$p&#39; sed_append.txt </span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="打印第1行到第2行"><a href="#打印第1行到第2行" class="headerlink" title="打印第1行到第2行"></a>打印第1行到第2行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# sed -n &#39;1,2p&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="打印第2行到最后一行"><a href="#打印第2行到最后一行" class="headerlink" title="打印第2行到最后一行"></a>打印第2行到最后一行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# sed -n &#39;2,$p&#39; sed_append.txt</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="打印包含指定关键字的行"><a href="#打印包含指定关键字的行" class="headerlink" title="打印包含指定关键字的行"></a>打印包含指定关键字的行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]# sed -n &#39;&#x2F;helloworld&#x2F;p&#39; sed_append.txt</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br></pre></td></tr></table></figure>
<h3 id="打印匹配正则表达式的行"><a href="#打印匹配正则表达式的行" class="headerlink" title="打印匹配正则表达式的行"></a>打印匹配正则表达式的行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]# sed -n &#39;&#x2F;world[0-9]&#x2F;p&#39; sed_append.txt</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h3 id="sed-n选项p命令：只打印包含匹配模式的行"><a href="#sed-n选项p命令：只打印包含匹配模式的行" class="headerlink" title="sed -n选项p命令：只打印包含匹配模式的行"></a>sed -n选项p命令：只打印包含匹配模式的行</h3><p>可以看到，用 -n 选项和 p 命令配合使用，可以只打印匹配的行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed -n &#39;2p&#39; sed_append.txt </span><br><span class="line">this is line b</span><br><span class="line">[root@localhost sed]# sed -n &#39;&#x2F;b&#x2F;p&#39; sed_append.txt </span><br><span class="line">this is line b</span><br><span class="line">[root@localhost sed]# sed -n &#39;&#x2F;line&#x2F;p&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h3 id="sed多脚本"><a href="#sed多脚本" class="headerlink" title="sed多脚本"></a>sed多脚本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">address &#123;</span><br><span class="line">    多个脚本命令</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="sed显示匹配的行，并显示替换后的结果。"><a href="#sed显示匹配的行，并显示替换后的结果。" class="headerlink" title="sed显示匹配的行，并显示替换后的结果。"></a>sed显示匹配的行，并显示替换后的结果。</h4><p>如果需要在修改之前查看行，也可以使用打印命令，比如与替换或修改命令一起使用。可以创建一个脚本在修改行之前显示该行，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#  sed -n &#39;&#x2F;b&#x2F;&#123;</span><br><span class="line">&gt; p;</span><br><span class="line">&gt; s&#x2F;line&#x2F;row&#x2F;p</span><br><span class="line">&gt; &#125;&#39; sed_append.txt</span><br><span class="line">this is line b</span><br><span class="line">this is row b</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure><br>sed 命令会查找包含小写字母b的行，然后执行两条命令。<br>首先，脚本用 p 命令来打印出原始行；<br>然后它用s命令替换文本，并用 p 标记打印出替换结果。<br>这样可以输出当前要处理的文本，以及替换之后的文本，以便于对比替换的结果是否达到要求</p>
<h4 id="多个脚本命令写在一行"><a href="#多个脚本命令写在一行" class="headerlink" title="多个脚本命令写在一行"></a>多个脚本命令写在一行</h4><p>可以吧多个命令写在一行之中，命令之间用英文的分号<code>;</code>分隔开即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;[address]&#123;命令1;命令2;...命令n&#125;&#39;</span><br></pre></td></tr></table></figure></p>
<pre>
[root@localhost sed]&#35; cat sed_append.txt 
this is line a
this is line b
this is line c
this is line d
&#35; helloworld_1
&#35; helloworld_2
&#35; helloworld_3
[root@localhost sed]&#35; sed -n '/^&#35;/,${p;s/helloworld/HELLOWORLD/pg}' sed_append.txt 
&#35; helloworld_1
&#35; HELLOWORLD_1
&#35; helloworld_2
&#35; HELLOWORLD_2
&#35; helloworld_3
&#35; HELLOWORLD_3
[root@localhost sed]&#35; 
</pre>

<h3 id="正则表达式词首词尾"><a href="#正则表达式词首词尾" class="headerlink" title="正则表达式词首词尾"></a>正则表达式词首词尾</h3><p><code>\&lt;</code>表示词首。 如：<code>\&lt;abc</code>表示以abc为首的詞。<br><code>\&gt;</code>表示词尾。 如：<code>abc\&gt;</code>表示以abc結尾的詞。</p>
<h3 id="打印有hello为词首的单词的行"><a href="#打印有hello为词首的单词的行" class="headerlink" title="打印有hello为词首的单词的行"></a>打印有hello为词首的单词的行</h3><pre>
[root@localhost sed]&#35; cat sed_append.txt 
this is line a
this is line b
this is line c
this is line d
&#35; helloworld_1
&#35; helloworld_2
&#35; helloworld_3
[root@localhost sed]&#35; sed -n '/\&lt;hello/p' sed_append.txt 
&#35; helloworld_1
&#35; helloworld_2
&#35; helloworld_3
[root@localhost sed]&#35; 
</pre>

<h3 id="打印有line为词尾的单词的行"><a href="#打印有line为词尾的单词的行" class="headerlink" title="打印有line为词尾的单词的行"></a>打印有line为词尾的单词的行</h3><pre>
[root@localhost sed]&#35; cat sed_append.txt 
this is line a
this is line b
this is line c
this is line d
&&#35;35; helloworld_1
&&#35;35; helloworld_2
&&#35;35; helloworld_3
[root@localhost sed]&#35; sed -n '/line\&gt;/p' sed_append.txt 
this is line a
this is line b
this is line c
this is line d
[root@localhost sed]&#35; 
</pre>

<h2 id="sed脚本命令w-file：输出模式空间中的内容到文件"><a href="#sed脚本命令w-file：输出模式空间中的内容到文件" class="headerlink" title="sed脚本命令w file：输出模式空间中的内容到文件"></a>sed脚本命令w file：输出模式空间中的内容到文件</h2><p>w命令用来将文本中指定行的内容写入文件中，此命令的基本格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;[address]w filename&#39;</span><br></pre></td></tr></table></figure><br>这里的 filename 表示文件名，可以使用相对路径或绝对路径，但不管是哪种，运行 sed 命令的用户都必须有文件的写权限。<br>下面的例子是将数据流中的前两行打印到一个文本文件中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;1,2 w sed_w_out.txt&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# cat sed_w_out.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h2 id="sed脚本命令r：插入独立文件的内容到当前数据流的指定位置"><a href="#sed脚本命令r：插入独立文件的内容到当前数据流的指定位置" class="headerlink" title="sed脚本命令r：插入独立文件的内容到当前数据流的指定位置"></a>sed脚本命令r：插入独立文件的内容到当前数据流的指定位置</h2><p>r 命令用于将一个独立文件的数据插入到当前数据流的指定位置，该命令的基本格式为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &quot;[address]r filename&quot;</span><br></pre></td></tr></table></figure><br>sed命令会将filename文件中的内容插入到address指定的行的后面。</p>
<h3 id="在文件的某行后插入另一个文件的内容"><a href="#在文件的某行后插入另一个文件的内容" class="headerlink" title="在文件的某行后插入另一个文件的内容"></a>在文件的某行后插入另一个文件的内容</h3><p>例如，将sed_2.txt文件中的内容，插入到sed_append.txt文件中的第二行后面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# cat sed_2.txt </span><br><span class="line">HelloWorld</span><br><span class="line">[root@localhost sed]# sed &quot;2r sed_2.txt&quot; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">HelloWorld</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h3 id="在文件的末尾插入另一个文件的内容"><a href="#在文件的末尾插入另一个文件的内容" class="headerlink" title="在文件的末尾插入另一个文件的内容"></a>在文件的末尾插入另一个文件的内容</h3><p>如果你想将指定文件中的数据插入到数据流的末尾，可以使用地址符<code>$</code>，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# cat sed_2.txt </span><br><span class="line">HelloWorld</span><br><span class="line">[root@localhost sed]# sed &#39;$r sed_2.txt&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">HelloWorld</span><br></pre></td></tr></table></figure><br>需要注意的是，命令如果使用的是双引号的话，则需要使用转义符，也就是双引号中的美元符号，要写成<code>&quot;\$&quot;</code>，而使用单引号就不需要使用转义符，只需要写成<code>&#39;$&#39;</code>即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# sed &quot;$r sed_2.txt&quot; sed_append.txt </span><br><span class="line">sed：-e 表达式 #1，字符 10：未终止的“s”命令</span><br><span class="line">[root@localhost sed]# sed &quot;\$r sed_2.txt&quot; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">HelloWorld</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h2 id="sed脚本命令q：匹配第一次后就退出sed程序"><a href="#sed脚本命令q：匹配第一次后就退出sed程序" class="headerlink" title="sed脚本命令q：匹配第一次后就退出sed程序"></a>sed脚本命令q：匹配第一次后就退出sed程序</h2><p>q命令的作用是使sed命令在第一次匹配任务结束后，退出 sed 程序，不再进行对后续数据的处理。</p>
<h3 id="sed匹配后退出"><a href="#sed匹配后退出" class="headerlink" title="sed匹配后退出"></a>sed匹配后退出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2q&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<p>可以看到，sed 命令在打印输出第 2 行之后，就停止了，是 q 命令造成的，再比如：</p>
<h3 id="sed查找替换第一次模式匹配后退出"><a href="#sed查找替换第一次模式匹配后退出" class="headerlink" title="sed查找替换第一次模式匹配后退出"></a>sed查找替换第一次模式匹配后退出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#  sed &#39;&#x2F;b&#x2F;&#123; s&#x2F;b&#x2F;B&#x2F;;q; &#125;&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line B</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<p>sed在当前行中查找到小写的字母b后，将小写的字母b替换成大写的字母B,然后退出sed不再处理后续的行。</p>
<h1 id="sed脚本命令的寻址方式"><a href="#sed脚本命令的寻址方式" class="headerlink" title="sed脚本命令的寻址方式"></a>sed脚本命令的寻址方式</h1><p>前面在介绍各个脚本命令时，我们一直忽略了对 address 部分的介绍。对各个脚本命令来说，address 用来表明该脚本命令作用到文本中的具体行。</p>
<p>默认情况下，sed 命令会作用于文本数据的所有行。如果只想将命令作用于特定行或某些行，则必须写明 address 部分，表示的方法有以下 2 种：</p>
<ul>
<li>以数字形式指定行区间；</li>
<li>用文本模式指定具体行区间。</li>
</ul>
<p>以上两种形式都可以使用如下这 2 种格式，分别是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]脚本命令</span><br></pre></td></tr></table></figure><br>或者<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">address &#123;</span><br><span class="line">    脚本命令1</span><br><span class="line">    脚本命令2</span><br><span class="line">    ......</span><br><span class="line">    脚本命令n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="以数字形式指定行区间"><a href="#以数字形式指定行区间" class="headerlink" title="以数字形式指定行区间"></a>以数字形式指定行区间</h2><p>当使用数字方式的行寻址时，可以用行在文本流中的行位置来引用。sed 会将文本流中的第一行编号为 1，然后继续按顺序为接下来的行分配行号。</p>
<p>在脚本命令中，</p>
<ul>
<li>指定的地址可以是单个行号，</li>
<li>也可以用<strong>起始行号+逗号+结束行号</strong>来指定指定的一定区间范围内的行（<code>起始行号,结尾行号</code>）。</li>
</ul>
<h3 id="使用数字指定行号"><a href="#使用数字指定行号" class="headerlink" title="使用数字指定行号"></a>使用数字指定行号</h3><p>这里举一个 sed 命令作用到指定行号的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2s&#x2F;s&#x2F;_&#x2F;g&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">thi_ i_ line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure><br>可以看到，sed 只修改地址指定的第二行的文本。下面的例子中使用了行地址区间：</p>
<h3 id="使用区间指定行地址"><a href="#使用区间指定行地址" class="headerlink" title="使用区间指定行地址"></a>使用区间指定行地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2,3s&#x2F;s&#x2F;_&#x2F;g&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">thi_ i_ line b</span><br><span class="line">thi_ i_ line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h4 id="特殊的行结束符"><a href="#特殊的行结束符" class="headerlink" title="特殊的行结束符$"></a>特殊的行结束符$</h4><p>在此基础上，如果想将命令作用到文本中从某行开始的所有行，可以用特殊地址——美元符（<code>$</code>）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">[root@localhost sed]# sed &#39;2,$s&#x2F;s&#x2F;_&#x2F;g&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">thi_ i_ line b</span><br><span class="line">thi_ i_ line c</span><br><span class="line">thi_ i_ line d</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure></p>
<h2 id="用文本模式指定行区间"><a href="#用文本模式指定行区间" class="headerlink" title="用文本模式指定行区间"></a>用文本模式指定行区间</h2><p>sed 允许指定文本模式来过滤出命令要作用的行，格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;pattern&#x2F;command</span><br></pre></td></tr></table></figure><br>注意，必须用正斜线将要指定的pattern封起来，sed会将该命令作用到包含指定文本模式的行上。</p>
<h3 id="固定文本模式：字符串形式的文本模式"><a href="#固定文本模式：字符串形式的文本模式" class="headerlink" title="固定文本模式：字符串形式的文本模式"></a>固定文本模式：字符串形式的文本模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]# cat sed_append.txt |grep &#39;helloworld&#39;</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]# sed &#39;&#x2F;helloworld&#x2F;s&#x2F;helloworld&#x2F;HELLOWORLD&#x2F;g&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">HELLOWORLD1</span><br><span class="line">HELLOWORLD2</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<p>虽然使用固定文本模式（字符串）能帮你过滤出特定的值，但其作用难免有限，因此，sed 允许在文本模式使用正则表达式指明作用的具体行。<br>正则表达式允许创建高级文本模式匹配表达式来匹配各种数据。这些表达式结合了一系列通配符、特殊字符以及固定文本字符来生成能够匹配几乎任何形式文本的简练模式。</p>
<h3 id="高级文本模式：使用正则表达式的文本模式"><a href="#高级文本模式：使用正则表达式的文本模式" class="headerlink" title="高级文本模式：使用正则表达式的文本模式"></a>高级文本模式：使用正则表达式的文本模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sed]# cat sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloworld1</span><br><span class="line">helloworld2</span><br><span class="line">[root@localhost sed]# sed &#39;&#x2F;world[0-9]&#x2F;s&#x2F;world&#x2F;WORLD&#x2F;g&#39; sed_append.txt </span><br><span class="line">this is line a</span><br><span class="line">this is line b</span><br><span class="line">this is line c</span><br><span class="line">this is line d</span><br><span class="line">helloWORLD1</span><br><span class="line">helloWORLD2</span><br><span class="line">[root@localhost sed]#</span><br></pre></td></tr></table></figure>
<h1 id="sed命令帮助文档"><a href="#sed命令帮助文档" class="headerlink" title="sed命令帮助文档"></a>sed命令帮助文档</h1><h2 id="sed-—help"><a href="#sed-—help" class="headerlink" title="sed —help"></a>sed —help</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# sed --help</span><br><span class="line">用法: sed [选项]... &#123;脚本(如果没有其他脚本)&#125; [输入文件]...</span><br><span class="line"></span><br><span class="line">  -n, --quiet, --silent</span><br><span class="line">                 取消自动打印模式空间</span><br><span class="line">  -e 脚本, --expression&#x3D;脚本</span><br><span class="line">                 添加“脚本”到程序的运行列表</span><br><span class="line">  -f 脚本文件, --file&#x3D;脚本文件</span><br><span class="line">                 添加“脚本文件”到程序的运行列表</span><br><span class="line">  --follow-symlinks</span><br><span class="line">                 直接修改文件时跟随软链接</span><br><span class="line">  -i[SUFFIX], --in-place[&#x3D;SUFFIX]</span><br><span class="line">                 edit files in place (makes backup if SUFFIX supplied)</span><br><span class="line">  -c, --copy</span><br><span class="line">                 use copy instead of rename when shuffling files in -i mode</span><br><span class="line">  -b, --binary</span><br><span class="line">                 does nothing; for compatibility with WIN32&#x2F;CYGWIN&#x2F;MSDOS&#x2F;EMX (</span><br><span class="line">                 open files in binary mode (CR+LFs are not treated specially))</span><br><span class="line">  -l N, --line-length&#x3D;N</span><br><span class="line">                 指定“l”命令的换行期望长度</span><br><span class="line">  --posix</span><br><span class="line">                 关闭所有 GNU 扩展</span><br><span class="line">  -r, --regexp-extended</span><br><span class="line">                 在脚本中使用扩展正则表达式</span><br><span class="line">  -s, --separate</span><br><span class="line">                 将输入文件视为各个独立的文件而不是一个长的连续输入</span><br><span class="line">  -u, --unbuffered</span><br><span class="line">                 从输入文件读取最少的数据，更频繁的刷新输出</span><br><span class="line">  -z, --null-data</span><br><span class="line">                 separate lines by NUL characters</span><br><span class="line">  --help</span><br><span class="line">                 display this help and exit</span><br><span class="line">  --version</span><br><span class="line">                 output version information and exit</span><br><span class="line"></span><br><span class="line">如果没有 -e, --expression, -f 或 --file 选项，那么第一个非选项参数被视为</span><br><span class="line">sed脚本。其他非选项参数被视为输入文件，如果没有输入文件，那么程序将从标准</span><br><span class="line">输入读取数据。</span><br><span class="line">GNU sed home page: &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;sed&#x2F;&gt;.</span><br><span class="line">General help using GNU software: &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;gethelp&#x2F;&gt;.</span><br><span class="line">E-mail bug reports to: &lt;bug-sed@gnu.org&gt;.</span><br><span class="line">Be sure to include the word &#96;&#96;sed&#39;&#39; somewhere in the &#96;&#96;Subject:&#39;&#39; field.</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure>
<h2 id="man-sed"><a href="#man-sed" class="headerlink" title="man sed"></a>man sed</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line">SED(1)                                                          User Commands                                                          SED(1)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       sed - stream editor for filtering and transforming text</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">       sed [OPTION]... &#123;script-only-if-no-other-script&#125; [input-file]...</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">       Sed  is  a  stream  editor.   A stream editor is used to perform basic text transformations on an input stream (a file or input from a</span><br><span class="line">       pipeline).  While in some ways similar to an editor which permits scripted edits (such as ed), sed works by making only one pass  over</span><br><span class="line">       the  input(s),  and  is  consequently more efficient.  But it is sed&#39;s ability to filter text in a pipeline which particularly distin‐</span><br><span class="line">       guishes it from other types of editors.</span><br><span class="line"></span><br><span class="line">       -n, --quiet, --silent</span><br><span class="line"></span><br><span class="line">              suppress automatic printing of pattern space</span><br><span class="line"></span><br><span class="line">       -e script, --expression&#x3D;script</span><br><span class="line"></span><br><span class="line">              add the script to the commands to be executed</span><br><span class="line"></span><br><span class="line">       -f script-file, --file&#x3D;script-file</span><br><span class="line"></span><br><span class="line">              add the contents of script-file to the commands to be executed</span><br><span class="line"></span><br><span class="line">       --follow-symlinks</span><br><span class="line"></span><br><span class="line">              follow symlinks when processing in place</span><br><span class="line"></span><br><span class="line">       -i[SUFFIX], --in-place[&#x3D;SUFFIX]</span><br><span class="line"></span><br><span class="line">              edit files in place (makes backup if SUFFIX supplied)</span><br><span class="line"></span><br><span class="line">       -c, --copy</span><br><span class="line"></span><br><span class="line">              use copy instead of rename when shuffling files in -i mode</span><br><span class="line"></span><br><span class="line">       -b, --binary</span><br><span class="line"></span><br><span class="line">              does nothing; for compatibility with WIN32&#x2F;CYGWIN&#x2F;MSDOS&#x2F;EMX ( open files in binary mode (CR+LFs are not treated specially))</span><br><span class="line"></span><br><span class="line">       -l N, --line-length&#x3D;N</span><br><span class="line"></span><br><span class="line">              specify the desired line-wrap length for the &#96;l&#39; command</span><br><span class="line"></span><br><span class="line">       --posix</span><br><span class="line"></span><br><span class="line">              disable all GNU extensions.</span><br><span class="line"></span><br><span class="line">       -r, --regexp-extended</span><br><span class="line"></span><br><span class="line">              use extended regular expressions in the script.</span><br><span class="line"></span><br><span class="line">       -s, --separate</span><br><span class="line"></span><br><span class="line">              consider files as separate rather than as a single continuous long stream.</span><br><span class="line"></span><br><span class="line">       -u, --unbuffered</span><br><span class="line"></span><br><span class="line">              load minimal amounts of data from the input files and flush the output buffers more often</span><br><span class="line"></span><br><span class="line">       -z, --null-data</span><br><span class="line"></span><br><span class="line">              separate lines by NUL characters</span><br><span class="line"></span><br><span class="line">       --help</span><br><span class="line"></span><br><span class="line">              display this help and exit</span><br><span class="line"></span><br><span class="line">       --version</span><br><span class="line"></span><br><span class="line">              output version information and exit</span><br><span class="line"></span><br><span class="line">       If no -e, --expression, -f, or --file option is given, then the first non-option argument is taken as the  sed  script  to  interpret.</span><br><span class="line">       All remaining arguments are names of input files; if no input files are specified, then the standard input is read.</span><br><span class="line"></span><br><span class="line">       GNU  sed  home  page: &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;sed&#x2F;&gt;.  General help using GNU software: &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;gethelp&#x2F;&gt;.  E-mail bug</span><br><span class="line">       reports to: &lt;bug-sed@gnu.org&gt;.  Be sure to include the word &#96;&#96;sed&#39;&#39; somewhere in the &#96;&#96;Subject:&#39;&#39; field.</span><br><span class="line"></span><br><span class="line">COMMAND SYNOPSIS</span><br><span class="line">       This is just a brief synopsis of sed commands to serve as a reminder to those who already know sed; other documentation (such  as  the</span><br><span class="line">       texinfo document) must be consulted for fuller descriptions.</span><br><span class="line"></span><br><span class="line">   Zero-address &#96;&#96;commands&#39;&#39;</span><br><span class="line">       : label</span><br><span class="line">              Label for b and t commands.</span><br><span class="line"></span><br><span class="line">       #comment</span><br><span class="line">              The comment extends until the next newline (or the end of a -e script fragment).</span><br><span class="line"></span><br><span class="line">       &#125;      The closing bracket of a &#123; &#125; block.</span><br><span class="line"></span><br><span class="line">   Zero- or One- address commands</span><br><span class="line">       &#x3D;      Print the current line number.</span><br><span class="line"></span><br><span class="line">       a \</span><br><span class="line"></span><br><span class="line">       text   Append text, which has each embedded newline preceded by a backslash.</span><br><span class="line"></span><br><span class="line">       i \</span><br><span class="line"></span><br><span class="line">       text   Insert text, which has each embedded newline preceded by a backslash.</span><br><span class="line"></span><br><span class="line">       q [exit-code]</span><br><span class="line">              Immediately  quit  the sed script without processing any more input, except that if auto-print is not disabled the current pat‐</span><br><span class="line">              tern space will be printed.  The exit code argument is a GNU extension.</span><br><span class="line"></span><br><span class="line">       Q [exit-code]</span><br><span class="line">              Immediately quit the sed script without processing any more input.  This is a GNU extension.</span><br><span class="line"></span><br><span class="line">       r filename</span><br><span class="line">              Append text read from filename.</span><br><span class="line"></span><br><span class="line">       R filename</span><br><span class="line">              Append a line read from filename.  Each invocation of the command reads a line from the file.  This is a GNU extension.</span><br><span class="line"></span><br><span class="line">   Commands which accept address ranges</span><br><span class="line">       &#123;      Begin a block of commands (end with a &#125;).</span><br><span class="line"></span><br><span class="line">       b label</span><br><span class="line">              Branch to label; if label is omitted, branch to end of script.</span><br><span class="line"></span><br><span class="line">       c \</span><br><span class="line"></span><br><span class="line">       text   Replace the selected lines with text, which has each embedded newline preceded by a backslash.</span><br><span class="line"></span><br><span class="line">       d      Delete pattern space.  Start next cycle.</span><br><span class="line"></span><br><span class="line">       D      If pattern space contains no newline, start a normal new cycle as if the d command was issued.  Otherwise, delete text  in  the</span><br><span class="line">              pattern space up to the first newline, and restart cycle with the resultant pattern space, without reading a new line of input.</span><br><span class="line"></span><br><span class="line">       h H    Copy&#x2F;append pattern space to hold space.</span><br><span class="line"></span><br><span class="line">       g G    Copy&#x2F;append hold space to pattern space.</span><br><span class="line"></span><br><span class="line">       l      List out the current line in a &#96;&#96;visually unambiguous&#39;&#39; form.</span><br><span class="line"></span><br><span class="line">       l width</span><br><span class="line">              List out the current line in a &#96;&#96;visually unambiguous&#39;&#39; form, breaking it at width characters.  This is a GNU extension.</span><br><span class="line"></span><br><span class="line">       n N    Read&#x2F;append the next line of input into the pattern space.</span><br><span class="line"></span><br><span class="line">       p      Print the current pattern space.</span><br><span class="line"></span><br><span class="line">       P      Print up to the first embedded newline of the current pattern space.</span><br><span class="line"></span><br><span class="line">       s&#x2F;regexp&#x2F;replacement&#x2F;</span><br><span class="line">              Attempt to match regexp against the pattern space.  If successful, replace that portion matched with replacement.  The replace‐</span><br><span class="line">              ment may contain the special character &amp; to refer to that portion of the pattern space which matched, and the  special  escapes</span><br><span class="line">              \1 through \9 to refer to the corresponding matching sub-expressions in the regexp.</span><br><span class="line"></span><br><span class="line">       t label</span><br><span class="line">              If  a s&#x2F;&#x2F;&#x2F; has done a successful substitution since the last input line was read and since the last t or T command, then branch</span><br><span class="line">              to label; if label is omitted, branch to end of script.</span><br><span class="line"></span><br><span class="line">       T label</span><br><span class="line">              If no s&#x2F;&#x2F;&#x2F; has done a successful substitution since the last input line was read and since the last t or T command, then branch</span><br><span class="line">              to label; if label is omitted, branch to end of script.  This is a GNU extension.</span><br><span class="line"></span><br><span class="line">       w filename</span><br><span class="line">              Write the current pattern space to filename.</span><br><span class="line"></span><br><span class="line">       W filename</span><br><span class="line">              Write the first line of the current pattern space to filename.  This is a GNU extension.</span><br><span class="line"></span><br><span class="line">       x      Exchange the contents of the hold and pattern spaces.</span><br><span class="line"></span><br><span class="line">       y&#x2F;source&#x2F;dest&#x2F;</span><br><span class="line">              Transliterate the characters in the pattern space which appear in source to the corresponding character in dest.</span><br><span class="line"></span><br><span class="line">Addresses</span><br><span class="line">       Sed  commands  can  be  given  with no addresses, in which case the command will be executed for all input lines; with one address, in</span><br><span class="line">       which case the command will only be executed for input lines which match that address; or with two addresses, in which case  the  com‐</span><br><span class="line">       mand  will  be executed for all input lines which match the inclusive range of lines starting from the first address and continuing to</span><br><span class="line">       the second address.  Three things to note about address ranges: the syntax is addr1,addr2 (i.e., the  addresses  are  separated  by  a</span><br><span class="line">       comma); the line which addr1 matched will always be accepted, even if addr2 selects an earlier line; and if addr2 is a regexp, it will</span><br><span class="line">       not be tested against the line that addr1 matched.</span><br><span class="line"></span><br><span class="line">       After the address (or address-range), and before the command, a !  may be inserted, which specifies that the  command  shall  only  be</span><br><span class="line">       executed if the address (or address-range) does not match.</span><br><span class="line"></span><br><span class="line">       The following address types are supported:</span><br><span class="line"></span><br><span class="line">       number Match only the specified line number (which increments cumulatively across files, unless the -s option is specified on the com‐</span><br><span class="line">              mand line).</span><br><span class="line"></span><br><span class="line">       first~step</span><br><span class="line">              Match every step&#39;th line starting with line first.  For example, &#96;&#96;sed -n 1~2p&#39;&#39; will print all the odd-numbered lines  in  the</span><br><span class="line">              input  stream, and the address 2~5 will match every fifth line, starting with the second.  first can be zero; in this case, sed</span><br><span class="line">              operates as if it were equal to step.  (This is an extension.)</span><br><span class="line"></span><br><span class="line">       $      Match the last line.</span><br><span class="line"></span><br><span class="line">       &#x2F;regexp&#x2F;</span><br><span class="line">              Match lines matching the regular expression regexp.</span><br><span class="line"></span><br><span class="line">       \cregexpc</span><br><span class="line">              Match lines matching the regular expression regexp.  The c may be any character.</span><br><span class="line"></span><br><span class="line">       GNU sed also supports some special 2-address forms:</span><br><span class="line"></span><br><span class="line">       0,addr2</span><br><span class="line">              Start out in &quot;matched first address&quot; state, until addr2 is found.  This is similar to 1,addr2, except that if addr2 matches the</span><br><span class="line">              very first line of input the 0,addr2 form will be at the end of its range, whereas the 1,addr2 form will still be at the begin‐</span><br><span class="line">              ning of its range.  This works only when addr2 is a regular expression.</span><br><span class="line"></span><br><span class="line">       addr1,+N</span><br><span class="line">              Will match addr1 and the N lines following addr1.</span><br><span class="line"></span><br><span class="line">       addr1,~N</span><br><span class="line">              Will match addr1 and the lines following addr1 until the next line whose input line number is a multiple of N.</span><br><span class="line"></span><br><span class="line">REGULAR EXPRESSIONS</span><br><span class="line">       POSIX.2 BREs should be supported, but they aren&#39;t completely because of performance problems.  The \n sequence in a regular expression</span><br><span class="line">       matches the newline character, and similarly for \a, \t, and other sequences.</span><br><span class="line"></span><br><span class="line">BUGS</span><br><span class="line">       E-mail bug reports to bug-sed@gnu.org.  Also, please include the output of &#96;&#96;sed --version&#39;&#39; in the body of your report if at all pos‐</span><br><span class="line">       sible.</span><br><span class="line"></span><br><span class="line">AUTHOR</span><br><span class="line">       Written by Jay Fenlason, Tom Lord, Ken Pizzini, and Paolo Bonzini.  GNU sed home  page:  &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;sed&#x2F;&gt;.   General</span><br><span class="line">       help  using  GNU  software:  &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;gethelp&#x2F;&gt;.   E-mail  bug  reports to: &lt;bug-sed@gnu.org&gt;.  Be sure to include the word</span><br><span class="line">       &#96;&#96;sed&#39;&#39; somewhere in the &#96;&#96;Subject:&#39;&#39; field.</span><br><span class="line"></span><br><span class="line">COPYRIGHT</span><br><span class="line">       Copyright © 2012 Free Software Foundation, Inc.  License GPLv3+: GNU GPL version 3 or later &lt;http:&#x2F;&#x2F;gnu.org&#x2F;licenses&#x2F;gpl.html&gt;.</span><br><span class="line">       This is free software: you are free to change and redistribute it.  There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">       awk(1), ed(1), grep(1), tr(1), perlre(1), sed.info, any of various books on sed, the sed FAQ (http:&#x2F;&#x2F;sed.sf.net&#x2F;grabbag&#x2F;tutorials&#x2F;sed‐</span><br><span class="line">       faq.txt), http:&#x2F;&#x2F;sed.sf.net&#x2F;grabbag&#x2F;.</span><br><span class="line"></span><br><span class="line">       The full documentation for sed is maintained as a Texinfo manual.  If the info and sed programs are properly installed at your site,</span><br><span class="line">       the command</span><br><span class="line"></span><br><span class="line">              info sed</span><br><span class="line"></span><br><span class="line">       should give you access to the complete manual.</span><br><span class="line"></span><br><span class="line">sed 4.2.2                                                       September 2020                                                         SED(1)</span><br><span class="line"> Manual page sed(1) line 210&#x2F;246 (END) (press h for help or q to quit)</span><br></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://c.biancheng.net/view/4028.html" target="_blank" rel="noopener">http://c.biancheng.net/view/4028.html</a><br><a href="http://c.biancheng.net/view/4056.html" target="_blank" rel="noopener">http://c.biancheng.net/view/4056.html</a><br><a href="https://www.runoob.com/linux/linux-comm-sed.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-sed.html</a><br><a href="https://developer.aliyun.com/article/320516" target="_blank" rel="noopener">https://developer.aliyun.com/article/320516</a><br><a href="https://www.cnblogs.com/dong008259/archive/2011/12/07/2279897.html" target="_blank" rel="noopener">https://www.cnblogs.com/dong008259/archive/2011/12/07/2279897.html</a><br><a href="https://coolshell.cn/articles/9104.html" target="_blank" rel="noopener">https://coolshell.cn/articles/9104.html</a><br><a href="https://qianngchn.github.io/wiki/4.html" target="_blank" rel="noopener">https://qianngchn.github.io/wiki/4.html</a></p>
<p><a href="https://segmentfault.com/a/1190000022722531" target="_blank" rel="noopener">https://segmentfault.com/a/1190000022722531</a><br><a href="https://www.linuxcool.com/sed" target="_blank" rel="noopener">https://www.linuxcool.com/sed</a><br><a href="https://www.cnblogs.com/ggjucheng/archive/2013/01/13/2856901.html" target="_blank" rel="noopener">https://www.cnblogs.com/ggjucheng/archive/2013/01/13/2856901.html</a><br><a href="https://learnku.com/server/wikis/36595" target="_blank" rel="noopener">https://learnku.com/server/wikis/36595</a><br><a href="http://linux.51yip.com/search/sed" target="_blank" rel="noopener">http://linux.51yip.com/search/sed</a><br><a href="https://zhuanlan.zhihu.com/p/130797132" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/130797132</a></p>
<h2 id="手册"><a href="#手册" class="headerlink" title="手册"></a>手册</h2><p><a href="http://www.gnu.org/software/sed/manual/sed.html" target="_blank" rel="noopener">http://www.gnu.org/software/sed/manual/sed.html</a></p>

    </div>

    
    
    
        
      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>蓝蓝</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tongsiying.github.io/blog/ce005e75/" title="Linux流编辑命令sed">https://tongsiying.github.io/blog/ce005e75/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！<br><strong><mark>如果图片无法显示</mark></strong>: <a href='https://lanlan2017.github.io/blog/9a6c2fdf/' target="_blank" rel="noopener">https://lanlan2017.github.io/blog/9a6c2fdf/</a></li>
</ul>
</div>

      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/blog/719da334/" rel="next" title="Linux 行筛选grep命令">
                  <i class="fa fa-chevron-left"></i> Linux 行筛选grep命令
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/blog/21ec0bd3/" rel="prev" title="Linux复杂筛选及加工命令awk">
                  Linux复杂筛选及加工命令awk <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#流编辑sed和正则表达式替换"><span class="nav-number">1.</span> <span class="nav-text">流编辑sed和正则表达式替换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sed命令常用选项及含义"><span class="nav-number">2.</span> <span class="nav-text">sed命令常用选项及含义</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#sed命令常见用法"><span class="nav-number">2.1.</span> <span class="nav-text">sed命令常见用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed-i：直接修改文件内容"><span class="nav-number">2.2.</span> <span class="nav-text">sed -i：直接修改文件内容</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#删除空行"><span class="nav-number">2.2.1.</span> <span class="nav-text">删除空行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除空行并且替换原文件"><span class="nav-number">2.2.2.</span> <span class="nav-text">删除空行并且替换原文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sed脚本命令"><span class="nav-number">3.</span> <span class="nav-text">sed脚本命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令s：替换行中的部分内容"><span class="nav-number">3.1.</span> <span class="nav-text">sed脚本命令s：替换行中的部分内容</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sed的s命令的flags标记及功能"><span class="nav-number">3.1.1.</span> <span class="nav-text">sed的s命令的flags标记及功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在行首添加内容"><span class="nav-number">3.1.2.</span> <span class="nav-text">在行首添加内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在行尾添加内容"><span class="nav-number">3.1.3.</span> <span class="nav-text">在行尾添加内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#替换所有行中第n次模式匹配的地方：sed-‘s-pattern-replacement-n’"><span class="nav-number">3.1.4.</span> <span class="nav-text">替换所有行中第n次模式匹配的地方：sed ‘s&#x2F;pattern&#x2F;replacement&#x2F;n’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#替换某行中全部模式匹配的地方：sed-‘行号s-pattern-replacement-g’"><span class="nav-number">3.1.5.</span> <span class="nav-text">替换某行中全部模式匹配的地方：sed ‘行号s&#x2F;pattern&#x2F;replacement&#x2F;g’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#替换第N行到第M行中第x次模式匹配的地方：sed-‘N-Ms-pattern-replacement-x’"><span class="nav-number">3.1.6.</span> <span class="nav-text">替换第N行到第M行中第x次模式匹配的地方：sed ‘N,Ms&#x2F;pattern&#x2F;replacement&#x2F;x’</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#第2到第3行之间的第2个制表符替换成四个减号"><span class="nav-number">3.1.6.1.</span> <span class="nav-text">第2到第3行之间的第2个制表符替换成四个减号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第2到第4行之间的第2个制表符替换成四个减号"><span class="nav-number">3.1.6.2.</span> <span class="nav-text">第2到第4行之间的第2个制表符替换成四个减号</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#替换行中所有模式匹配的地方：sed-‘s-pattern-replacement-g’"><span class="nav-number">3.1.7.</span> <span class="nav-text">替换行中所有模式匹配的地方：sed ‘s&#x2F;pattern&#x2F;replacement&#x2F;g’</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#将所有行中的所有制表符全部替换为四个减号"><span class="nav-number">3.1.7.1.</span> <span class="nav-text">将所有行中的所有制表符全部替换为四个减号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将所有的全小写的sed字符全部替换为全大写的SED字符串"><span class="nav-number">3.1.7.2.</span> <span class="nav-text">将所有的全小写的sed字符全部替换为全大写的SED字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将包括第1行到不包括第3行之间的制表符改成4个减号"><span class="nav-number">3.1.7.3.</span> <span class="nav-text">将包括第1行到不包括第3行之间的制表符改成4个减号</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将缓冲区中的内容输出到文件中：sed-‘s-pattern-replacement-flag-w-file’："><span class="nav-number">3.1.8.</span> <span class="nav-text">将缓冲区中的内容输出到文件中：sed ‘s&#x2F;pattern&#x2F;replacement&#x2F;flag w file’：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令d：删除某行"><span class="nav-number">3.2.</span> <span class="nav-text">sed脚本命令d：删除某行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sed删除所有的行"><span class="nav-number">3.2.1.</span> <span class="nav-text">sed删除所有的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed删除指定行"><span class="nav-number">3.2.2.</span> <span class="nav-text">sed删除指定行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#只删除某行"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">只删除某行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除第N行到第M行"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">删除第N行到第M行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除空行-1"><span class="nav-number">3.2.3.</span> <span class="nav-text">删除空行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令a：在指定行后追加新行"><span class="nav-number">3.3.</span> <span class="nav-text">sed脚本命令a：在指定行后追加新行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在某行之后追加一行"><span class="nav-number">3.3.1.</span> <span class="nav-text">在某行之后追加一行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在某行之后追加多行"><span class="nav-number">3.3.2.</span> <span class="nav-text">在某行之后追加多行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用折行符号"><span class="nav-number">3.3.2.1.</span> <span class="nav-text">使用折行符号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用换行符-n"><span class="nav-number">3.3.2.2.</span> <span class="nav-text">使用换行符\n</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令i：在指定行之前插入新行"><span class="nav-number">3.4.</span> <span class="nav-text">sed脚本命令i：在指定行之前插入新行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在第N行之前插入一行"><span class="nav-number">3.4.1.</span> <span class="nav-text">在第N行之前插入一行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在第N行之前插入多行"><span class="nav-number">3.4.2.</span> <span class="nav-text">在第N行之前插入多行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令c：替换整行"><span class="nav-number">3.5.</span> <span class="nav-text">sed脚本命令c：替换整行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#替换第2行的内容"><span class="nav-number">3.5.1.</span> <span class="nav-text">替换第2行的内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令y：字符集映射替换"><span class="nav-number">3.6.</span> <span class="nav-text">sed脚本命令y：字符集映射替换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例1"><span class="nav-number">3.6.1.</span> <span class="nav-text">示例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例2"><span class="nav-number">3.6.2.</span> <span class="nav-text">示例2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#大小写转换"><span class="nav-number">3.6.3.</span> <span class="nav-text">大小写转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令p：打印某行"><span class="nav-number">3.7.</span> <span class="nav-text">sed脚本命令p：打印某行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sed-‘-address-p’-输出匹配的行"><span class="nav-number">3.7.1.</span> <span class="nav-text">sed ‘[address]p’ 输出匹配的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed-n-‘-address-p’"><span class="nav-number">3.7.2.</span> <span class="nav-text">sed -n ‘[address]p’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印第一行"><span class="nav-number">3.7.3.</span> <span class="nav-text">打印第一行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印最后一行"><span class="nav-number">3.7.4.</span> <span class="nav-text">打印最后一行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印第1行到第2行"><span class="nav-number">3.7.5.</span> <span class="nav-text">打印第1行到第2行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印第2行到最后一行"><span class="nav-number">3.7.6.</span> <span class="nav-text">打印第2行到最后一行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印包含指定关键字的行"><span class="nav-number">3.7.7.</span> <span class="nav-text">打印包含指定关键字的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印匹配正则表达式的行"><span class="nav-number">3.7.8.</span> <span class="nav-text">打印匹配正则表达式的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed-n选项p命令：只打印包含匹配模式的行"><span class="nav-number">3.7.9.</span> <span class="nav-text">sed -n选项p命令：只打印包含匹配模式的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed多脚本"><span class="nav-number">3.7.10.</span> <span class="nav-text">sed多脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sed显示匹配的行，并显示替换后的结果。"><span class="nav-number">3.7.10.1.</span> <span class="nav-text">sed显示匹配的行，并显示替换后的结果。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多个脚本命令写在一行"><span class="nav-number">3.7.10.2.</span> <span class="nav-text">多个脚本命令写在一行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则表达式词首词尾"><span class="nav-number">3.7.11.</span> <span class="nav-text">正则表达式词首词尾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印有hello为词首的单词的行"><span class="nav-number">3.7.12.</span> <span class="nav-text">打印有hello为词首的单词的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印有line为词尾的单词的行"><span class="nav-number">3.7.13.</span> <span class="nav-text">打印有line为词尾的单词的行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令w-file：输出模式空间中的内容到文件"><span class="nav-number">3.8.</span> <span class="nav-text">sed脚本命令w file：输出模式空间中的内容到文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令r：插入独立文件的内容到当前数据流的指定位置"><span class="nav-number">3.9.</span> <span class="nav-text">sed脚本命令r：插入独立文件的内容到当前数据流的指定位置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在文件的某行后插入另一个文件的内容"><span class="nav-number">3.9.1.</span> <span class="nav-text">在文件的某行后插入另一个文件的内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在文件的末尾插入另一个文件的内容"><span class="nav-number">3.9.2.</span> <span class="nav-text">在文件的末尾插入另一个文件的内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed脚本命令q：匹配第一次后就退出sed程序"><span class="nav-number">3.10.</span> <span class="nav-text">sed脚本命令q：匹配第一次后就退出sed程序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sed匹配后退出"><span class="nav-number">3.10.1.</span> <span class="nav-text">sed匹配后退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed查找替换第一次模式匹配后退出"><span class="nav-number">3.10.2.</span> <span class="nav-text">sed查找替换第一次模式匹配后退出</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sed脚本命令的寻址方式"><span class="nav-number">4.</span> <span class="nav-text">sed脚本命令的寻址方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#以数字形式指定行区间"><span class="nav-number">4.1.</span> <span class="nav-text">以数字形式指定行区间</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用数字指定行号"><span class="nav-number">4.1.1.</span> <span class="nav-text">使用数字指定行号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用区间指定行地址"><span class="nav-number">4.1.2.</span> <span class="nav-text">使用区间指定行地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特殊的行结束符"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">特殊的行结束符$</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用文本模式指定行区间"><span class="nav-number">4.2.</span> <span class="nav-text">用文本模式指定行区间</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#固定文本模式：字符串形式的文本模式"><span class="nav-number">4.2.1.</span> <span class="nav-text">固定文本模式：字符串形式的文本模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级文本模式：使用正则表达式的文本模式"><span class="nav-number">4.2.2.</span> <span class="nav-text">高级文本模式：使用正则表达式的文本模式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sed命令帮助文档"><span class="nav-number">5.</span> <span class="nav-text">sed命令帮助文档</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#sed-—help"><span class="nav-number">5.1.</span> <span class="nav-text">sed —help</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#man-sed"><span class="nav-number">5.2.</span> <span class="nav-text">man sed</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考资料"><span class="nav-number">6.</span> <span class="nav-text">参考资料</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#手册"><span class="nav-number">6.1.</span> <span class="nav-text">手册</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/blog/images/avatar.gif"
      alt="蓝蓝">
  <p class="site-author-name" itemprop="name">蓝蓝</p>
  <div class="site-description" itemprop="description">先看视频再看书</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/blog/archives/%20%7C%7C%20archive">
        
          <span class="site-state-item-count">456</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/blog/categories/%20%7C%7C%20th">
          
        
        <span class="site-state-item-count">168</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/lanlan2017" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;lanlan2017" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://lanlan2017.github.io/ReadingNotes/" title="ReadingNotes &amp;rarr; https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;ReadingNotes&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>ReadingNotes</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://lanlan2017.github.io/blog/" title="blog &amp;rarr; https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;blog&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>blog</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://lanlan2017.github.io/blog/tools/" title="tools &amp;rarr; https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;blog&#x2F;tools&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-wrench"></i>tools</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蓝蓝</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.1</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.1</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js?v=3.1.0"></script>
  <script src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/blog/js/utils.js?v=7.4.1.js"></script>

<script src="/blog/js/motion.js?v=7.4.1.js"></script>


<script src="/blog/js/schemes/pisces.js?v=7.4.1.js"></script>



<script src="/blog/js/next-boot.js?v=7.4.1.js"></script>

<script src="/blog/js/bookmark.js?v=7.4.1.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>








  
<script src="/blog/js/local-search.js?v=7.4.1.js"></script>















  

  

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'KVtEjXUX9wDimI183iDfg6tK-MdYXbMMI',
    appKey: 'mvmFgKF86C8Pi79KfVeFgzys',
    placeholder: '在这里输入评论',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
